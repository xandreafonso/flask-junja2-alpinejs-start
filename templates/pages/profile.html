
{% extends "layouts/index.html" %}

{% block title %}Perfil - Flask App{% endblock %}
{% block description %}Página de perfil do usuário{% endblock %}

{% block header_title %}Perfil do Usuário{% endblock %}

{% block breadcrumbs %}
<nav class="flex mb-6" aria-label="Breadcrumb">
    <ol class="flex items-center space-x-4">
        <li>
            <div>
                <a href="{{ url_for('index') }}" class="text-gray-400 hover:text-gray-500">
                    <svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z" />
                    </svg>
                    <span class="sr-only">Home</span>
                </a>
            </div>
        </li>
        <li>
            <div class="flex items-center">
                <svg class="h-5 w-5 text-gray-400" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 111.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd" />
                </svg>
                <span class="ml-4 text-sm font-medium text-gray-500">Perfil</span>
            </div>
        </li>
    </ol>
</nav>
{% endblock %}

{% block page_content %}
<div x-data="profileData()" class="space-y-6">
    <!-- Profile Header -->
    <div class="bg-white shadow rounded-lg border border-gray-200">
        <div class="px-4 py-5 sm:p-6">
            <div class="flex items-center space-x-6">
                <div class="flex-shrink-0">
                    <div class="h-20 w-20 bg-gradient-to-r from-purple-400 to-pink-400 rounded-full flex items-center justify-center">
                        <span class="text-2xl font-bold text-white" x-text="user.name.charAt(0).toUpperCase()"></span>
                    </div>
                </div>
                <div class="flex-1 min-w-0">
                    <h2 class="text-2xl font-bold text-gray-900" x-text="user.name"></h2>
                    <p class="text-sm font-medium text-gray-500" x-text="user.email"></p>
                    <p class="text-sm text-gray-500" x-text="'Membro desde ' + user.joinDate"></p>
                </div>
                <div class="flex-shrink-0">
                    <button @click="editMode = !editMode" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors">
                        <span x-text="editMode ? 'Cancelar' : 'Editar Perfil'"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Profile Form -->
    <div x-show="editMode" x-transition class="bg-white shadow rounded-lg border border-gray-200">
        <div class="px-4 py-5 sm:p-6">
            <h3 class="text-lg leading-6 font-medium text-gray-900 mb-4">Editar Informações</h3>
            <form @submit.prevent="updateProfile()">
                <div class="grid grid-cols-1 gap-6 sm:grid-cols-2">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Nome</label>
                        <input x-model="editForm.name" type="text" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Email</label>
                        <input x-model="editForm.email" type="email" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Telefone</label>
                        <input x-model="editForm.phone" type="tel" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Cargo</label>
                        <select x-model="editForm.role" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <option value="user">Usuário</option>
                            <option value="admin">Administrador</option>
                            <option value="manager">Gerente</option>
                        </select>
                    </div>
                </div>
                <div class="mt-6">
                    <label class="block text-sm font-medium text-gray-700 mb-2">Bio</label>
                    <textarea x-model="editForm.bio" rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Conte um pouco sobre você..."></textarea>
                </div>
                <div class="mt-6 flex justify-end space-x-3">
                    <button type="button" @click="editMode = false" class="bg-gray-300 hover:bg-gray-400 text-gray-700 px-4 py-2 rounded-md text-sm font-medium transition-colors">
                        Cancelar
                    </button>
                    <button type="submit" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors">
                        Salvar Alterações
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- User Stats -->
    <div class="bg-white shadow rounded-lg border border-gray-200">
        <div class="px-4 py-5 sm:p-6">
            <h3 class="text-lg leading-6 font-medium text-gray-900 mb-4">Estatísticas</h3>
            <dl class="grid grid-cols-1 gap-5 sm:grid-cols-3">
                <div class="text-center">
                    <dt class="text-sm font-medium text-gray-500">Posts</dt>
                    <dd class="text-3xl font-semibold text-gray-900" x-text="userStats.posts"></dd>
                </div>
                <div class="text-center">
                    <dt class="text-sm font-medium text-gray-500">Seguidores</dt>
                    <dd class="text-3xl font-semibold text-gray-900" x-text="userStats.followers"></dd>
                </div>
                <div class="text-center">
                    <dt class="text-sm font-medium text-gray-500">Seguindo</dt>
                    <dd class="text-3xl font-semibold text-gray-900" x-text="userStats.following"></dd>
                </div>
            </dl>
        </div>
    </div>

    <!-- Recent Posts -->
    <div class="bg-white shadow rounded-lg border border-gray-200">
        <div class="px-4 py-5 sm:p-6">
            <h3 class="text-lg leading-6 font-medium text-gray-900 mb-4">Posts Recentes</h3>
            <div class="space-y-4">
                <template x-for="post in recentPosts" :key="post.id">
                    <div class="border-l-4 border-blue-500 pl-4">
                        <h4 class="font-medium text-gray-900" x-text="post.title"></h4>
                        <p class="text-sm text-gray-600" x-text="post.excerpt"></p>
                        <p class="text-xs text-gray-500 mt-2" x-text="'Publicado em ' + post.date"></p>
                    </div>
                </template>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block bottom_js %}
<script>
function profileData() {
    return {
        editMode: false,
        user: {
            name: '{{ user.name|default("João Silva") }}',
            email: '{{ user.email|default("joao@example.com") }}',
            phone: '{{ user.phone|default("(11) 99999-9999") }}',
            role: '{{ user.role|default("user") }}',
            bio: '{{ user.bio|default("Desenvolvedor apaixonado por tecnologia e inovação.") }}',
            joinDate: '{{ user.join_date|default("Janeiro 2024") }}'
        },
        editForm: {},
        userStats: {
            posts: {{ user_stats.posts|default(42) }},
            followers: {{ user_stats.followers|default(1250) }},
            following: {{ user_stats.following|default(380) }}
        },
        recentPosts: [
            {
                id: 1,
                title: 'Como implementar templates hierárquicos em Flask',
                excerpt: 'Um guia completo sobre como estruturar templates usando Jinja2...',
                date: '15 de Janeiro, 2024'
            },
            {
                id: 2,
                title: 'Alpine.js: JavaScript reativo sem complexidade',
                excerpt: 'Descubra como Alpine.js pode simplificar sua aplicação frontend...',
                date: '12 de Janeiro, 2024'
            },
            {
                id: 3,
                title: 'Tailwind CSS: Produtividade em estilização',
                excerpt: 'Por que Tailwind CSS se tornou minha ferramenta favorita...',
                date: '10 de Janeiro, 2024'
            }
        ],
        
        init() {
            this.editForm = { ...this.user };
        },
        
        updateProfile() {
            // Simula atualização do perfil
            this.user = { ...this.editForm };
            this.editMode = false;
            
            // Em uma aplicação real, você faria uma requisição AJAX aqui
            alert('Perfil atualizado com sucesso!');
        }
    }
}
</script>
{% endblock %}
