
{% extends "layouts/template.html" %}

{% block title %}Perfil{% endblock %}

{% block page %}
<div x-data="profileData()" x-init="fetchProfile()">
    <h2 class="text-2xl font-bold mb-4">Profile Information</h2>
    
    <div x-show="loading" class="text-gray-500">
        Loading profile data...
    </div>
    
    <div x-show="!loading && profile" class="bg-gray-100 p-4 rounded">
        <p><strong>ID:</strong> <span x-text="profile.id"></span></p>
        <p><strong>Name:</strong> <span x-text="profile.name"></span></p>
        <p><strong>Email:</strong> <span x-text="profile.email"></span></p>
    </div>
    
    <div x-show="error" class="text-red-500" x-text="error"></div>
</div>

<script>
function profileData() {
    return {
        profile: null,
        loading: false,
        error: null,
        
        async fetchProfile() {
            this.loading = true;
            this.error = null;
            
            try {
                const response = await fetch('/api/profile');
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                this.profile = await response.json();
            } catch (err) {
                this.error = 'Failed to fetch profile data: ' + err.message;
            } finally {
                this.loading = false;
            }
        }
    }
}
</script>
{% endblock %}
